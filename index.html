<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Our Space</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- âœ… ì±—ë´‡ ë²„íŠ¼ -->
  <div class="chatbot-button" id="chatbotBtn" onclick="toggleChatbot()">ğŸ’¬</div>
</body>
  <!-- âœ… ì±—ë´‡ ì°½ -->
  <div class="chatbot-window" id="chatbot">
    <div class="chatbot-header">
      <span>ì±—ë´‡ ìƒë‹´</span>
      <button onclick="toggleChatbot()">âœ–</button>
    </div>
    <div class="chatbot-body" id="chatbot-body">
      <p>ì•ˆë…•í•˜ì„¸ìš”! ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”?</p>
    </div>
    <div class="chatbot-input">
      <input type="text" id="chatInput" placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”..." />
      <button id="sendBtn">ì „ì†¡</button>
    </div>
  </div>

  <!-- ìƒë‹¨ ë©”ë‰´ -->
  <header>
    <div class="nav-left">
      <a href="index.html">í™ˆ</a>
      <button id="darkModeToggle">ğŸŒ™</button>
    </div>
    <div class="nav-center">
      <a href="board.html">ê²Œì‹œíŒ</a>
      <a href="#">ë‹¤ë¬¸í™” ê°€ì •</a>
      <a href="#">ìœ í•™ìƒ</a>
      <a href="#">ì™¸êµ­ì¸ ê·¼ë¡œì</a>
    </div>
    <div class="nav-right" id="navRight">
      <a href="login.html">ë¡œê·¸ì¸</a>
      <a href="signup.html">íšŒì›ê°€ì…</a>
    </div>
  </header>

  <!-- ë©”ì¸ ì»¨í…Œì´ë„ˆ -->
  <div class="container">
    <h1>Welcome to Our Space ğŸŒ</h1>
    <p>ë‹¤ë¬¸í™” ê°€ì •, ìœ í•™ìƒ, ì™¸êµ­ì¸ ê·¼ë¡œìë¥¼ ìœ„í•œ ê¸€ë¡œë²Œ ì»¤ë®¤ë‹ˆí‹° í”Œë«í¼</p>
  </div>

  <!-- í•˜ë‹¨ ì •ë³´ -->
  <footer>
    <div class="footer">
      <p>ì‚¬ì—…ìëª…: Our Space Â | ëŒ€í‘œì: ì´ìƒìš° Â | ì—°ë½ì²˜: 010-1234-5678 Â | ì´ë©”ì¼: ourspace@example.com</p>
      <p>&copy; 2025 Our Space. All rights reserved.</p>
    </div>
  </footer>

  <!-- ìŠ¤í¬ë¦½íŠ¸ -->
  <script>
    // ğŸŒ™ ë‹¤í¬ëª¨ë“œ í† ê¸€
document.getElementById("darkModeToggle").addEventListener("click", () => {
  document.body.classList.toggle("dark-mode");
});

    function toggleChatbot() {
      const chatbot = document.getElementById("chatbot");
      chatbot.style.display = chatbot.style.display === "flex" ? "none" : "flex";
    }

    document.getElementById("sendBtn").addEventListener("click", async () => {
      const input = document.getElementById("chatInput");
      const message = input.value.trim();
      const chatBody = document.getElementById("chatbot-body");

      if (!message) return;

      const userMsg = document.createElement("p");
      userMsg.textContent = "ğŸ™‹â€â™‚ï¸ " + message;
      chatBody.appendChild(userMsg);
      input.value = "";

      const botMsg = document.createElement("p");
      botMsg.textContent = "ğŸ§  ë‹µë³€ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...";
      chatBody.appendChild(botMsg);

      try {
        const response = await fetch("https://api.openai.com/v1/chat/completions", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "Authorization": "Bearer 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"
          },
          body: JSON.stringify({
            model: "gpt-3.5-turbo",
            messages: [{ role: "user", content: message }]
          })
        });

        const data = await response.json();
        const reply = data.choices?.[0]?.message?.content || "â— ì‘ë‹µì„ ì´í•´í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.";
        botMsg.textContent = "ğŸ§  " + reply;
        chatBody.scrollTop = chatBody.scrollHeight;
      } catch (error) {
        botMsg.textContent = "â— ì˜¤ë¥˜ ë°œìƒ: " + error.message;
      }
    });

    // ê´€ë¦¬ì ë¡œê·¸ì¸ ì—¬ë¶€ í™•ì¸
    const isAdmin = sessionStorage.getItem("isAdmin") === "true";
    if (isAdmin) {
      const navRight = document.getElementById("navRight");
      const adminLink = document.createElement("a");
      adminLink.href = "admin.html";
      adminLink.textContent = "ê´€ë¦¬ì";
      navRight.appendChild(adminLink);
    }
  </script>
</body>
</html>
